<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Trading Mentor Test</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    #response { margin-top: 20px; white-space: pre-wrap; background: #f3f3f3; padding: 10px; border-radius: 5px; }
    input, textarea, button { padding: 8px; margin: 5px 0; width: 100%; max-width: 400px; }
  </style>
</head>
<body>
  <h1>AI Trading Mentor Test</h1>
  
  <label>Wallet Address:</label>
  <input id="wallet" placeholder="0x123..." />

  <label>Symbols (comma separated):</label>
  <input id="symbols" placeholder="BTCUSDT,ETHUSDT" />

  <label>Your Question:</label>
  <textarea id="question" rows="3" placeholder="Am I entering trades too early?"></textarea>

  <button id="analyzeBtn">Analyze Trades</button>

  <div id="response"></div>

  <script>
    const analyzeBtn = document.getElementById('analyzeBtn');
    const responseDiv = document.getElementById('response');

    analyzeBtn.addEventListener('click', async () => {
      const wallet = document.getElementById('wallet').value.trim();
      const symbols = document.getElementById('symbols').value.split(',').map(s => s.trim());
      const question = document.getElementById('question').value.trim();

      if (!wallet || symbols.length === 0) {
        responseDiv.textContent = "Please enter wallet address and symbols.";
        return;
      }

      responseDiv.textContent = "Loading...";

      try {
        const res = await fetch('http://localhost:3000/api/analyze', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ walletAddress: wallet, symbols, userQuestion: question })
        });

        const data = await res.json();
        responseDiv.textContent = data.message || JSON.stringify(data, null, 2);

      } catch (err) {
        responseDiv.textContent = "Error calling backend: " + err.message;
      }
    });
  </script>
</body>
</html>
